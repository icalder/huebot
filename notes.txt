Let's have a think about using NATS-Jetstream as part of hue eventing

Currently, server.ts creates a MongoWriter if process.env.MONGO_HOST is defined.
Events received from hue eventstream clip are written to mongo.

Let's make some changes.

1. Run NATS Jetstream
2. Create a stream that all raw hue events will be published to.  
 Looks like an app has to do that.  Maybe hue bot could create the stream.
3. Stream doesn't need to hold onto messages for too long as they will be
 moved to mongo - maybe 2 week retention?
4. Make a new consumer that copies messages to mongo
5. Make a new watchdog consumer for things like ensuring the garden lights don't go off completely
 during the night and don't stay on white for too long (state machine)

Let's do some playing with nats cli for message publish/receive and streams
https://docs.nats.io/nats-concepts/core-nats/pubsub/pubsub_walkthrough
https://docs.nats.io/nats-concepts/jetstream/js_walkthrough

First need to get NATS Jetstream running on pi4 and starting on boot etc.
https://docs.nats.io/running-a-nats-service/introduction/running


# install systemd file to /etc/systemd/system/nats.service
# https://github.com/nats-io/nats-server/blob/main/util/nats-server.service


sudo adduser --system --group --no-create-home --shell /bin/false nats
sudo mkdir /data/nats
sudo chown nats. /data/nats
sudo systemctl daemon-reload
sudo systemctl enable --now nats
